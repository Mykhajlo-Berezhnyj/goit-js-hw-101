{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'flatpickr/dist/themes/material_blue.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\nlet interval;\nlet newInterval;\nlet isRunning = false;\nconst timer = document.querySelector('.timer');\nconst startButton = document.querySelector('button[data-start]');\nconst inputData = document.getElementById('datetime-picker');\nconst day = document.querySelector('span[data-days]');\nconst hour = document.querySelector('span[data-hours]');\nconst minute = document.querySelector('span[data-minutes]');\nconst second = document.querySelector('span[data-seconds]');\n\nsetTimeout(() => {\n  iziToast.show({\n    title: 'Hello',\n    message: 'Welcome to Timer!',\n    titleColor: '#FFFFFF',\n    messageColor: '#FFFFFF',\n    position: 'bottomRight',\n    backgroundColor: '#0099FF',\n    iconUrl: 'img/hello.svg',\n  });\n}, 1000);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onChange(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate && userSelectedDate <= new Date()) {\n      startButton.setAttribute('disabled', 'true');\n      iziToast.show({\n        title: 'Error!',\n        message: 'Please choose a date in the future',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        iconUrl: 'img/error.svg',\n      });\n    }\n  },\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    userSelectedDate = selectedDates[0];\n    console.log('🚀 ~ onClose ~ userSelectedDate:', userSelectedDate);\n    if (userSelectedDate && userSelectedDate <= new Date()) {\n      startButton.setAttribute('disabled', 'true');\n      iziToast.show({\n        title: 'Warning!',\n        message:\n          'Ви вибрали дату в минулому, бажаєте дізнатися скільки часу минуло від цієї дати?',\n        titleColor: '#0000FF',\n        messageColor: '#0000FF',\n        position: 'center',\n        backgroundColor: '#FFA000',\n        iconUrl: 'img/caution.svg',\n        buttons: [\n          [\n            '<button class=\"btn\">OK</button>',\n            function (instance, toast) {\n              startButton.removeAttribute('disabled');\n              instance.hide({ transitionOut: 'fadeOut' }, toast);\n            },\n          ],\n        ],\n      });\n    } else {\n      startButton.removeAttribute('disabled');\n    }\n  },\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  flatpickr('#datetime-picker', options);\n});\n\nstartButton.addEventListener('click', dataTimer);\n\nfunction dataTimer() {\n  if (isRunning) {\n    console.log('🚀 ~ dataTimer ~ isRunning:', isRunning);\n    resetTimer();\n    return;\n  }\n  if (!userSelectedDate) {\n    return;\n  }\n  inputData.disabled = true;\n  const currentDate = new Date();\n  if (userSelectedDate > currentDate) {\n    startButton.setAttribute('disabled', 'true');\n  } else {\n    startButton.textContent = 'Stop';\n  }\n  isRunning = true;\n  interval = setInterval(() => {\n    const currentDate = new Date();\n    newInterval = Math.abs(userSelectedDate - currentDate);\n    if (newInterval <= 0) {\n      inputData.disabled = false;\n      clearInterval(interval);\n      timer.querySelectorAll('.value, .label').forEach(element => {\n        element.classList.remove('active');\n      });\n      defaultDate: new Date();\n      iziToast.show({\n        title: 'Warning!',\n        message: 'Час до даної події минув!',\n        titleColor: '#bd34fe',\n        messageColor: '#25acda',\n        position: 'center',\n        backgroundColor: '#d4cec7f3',\n      });\n      return;\n    } else {\n      displayData();\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction displayData(value) {\n  timer.querySelectorAll('.value, .label').forEach(element => {\n    element.classList.add('active');\n  });\n  const interval = convertMs(newInterval);\n  day.textContent = addLeadingZero(interval.days);\n  hour.textContent = addLeadingZero(interval.hours);\n  minute.textContent = addLeadingZero(interval.minutes);\n  second.textContent = addLeadingZero(interval.seconds);\n}\n\nfunction resetTimer() {\n  day.textContent = '00';\n  hour.textContent = '00';\n  minute.textContent = '00';\n  second.textContent = '00';\n  userSelectedDate = null;\n  newInterval = 0;\n  isRunning = false;\n  startButton.textContent = 'Start';\n  inputData.disabled = false;\n  clearInterval(interval);\n  startButton.setAttribute('disabled', 'true');\n  timer.querySelectorAll('.value, .label').forEach(element => {\n    element.classList.remove('active');\n  });\n}\n"],"names":["userSelectedDate","interval","newInterval","isRunning","timer","startButton","inputData","day","hour","minute","second","iziToast","options","selectedDates","instance","toast","flatpickr","dataTimer","resetTimer","element","displayData","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"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"}